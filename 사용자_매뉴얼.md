# MedDRA 28.1 한국어 자동 코딩 시스템 - 사용자 매뉴얼

## 📋 목차
1. [시스템 소개](#시스템-소개)
2. [접속 방법](#접속-방법)
3. [로그인](#로그인)
4. [주요 기능](#주요-기능)
5. [CIOMS 보고서 처리](#cioms-보고서-처리)
6. [자동 DB 입력](#자동-db-입력)
7. [문제 해결](#문제-해결)

---

## 시스템 소개

**MedDRA 28.1 한국어 자동 코딩 시스템**은 CIOMS-I 부작용 보고서의 증상을 MedDRA 코드로 자동 변환하고, MedDRA-DB에 자동으로 입력하는 웹 기반 시스템입니다.

### 주요 특징
- ✅ **PDF 자동 분석**: CIOMS-I 보고서 PDF에서 정보 자동 추출
- ✅ **증상 자동 검색**: 추출된 증상을 MedDRA 데이터베이스에서 자동 검색
- ✅ **다국어 지원**: 영어 및 한국어 증상명 검색
- ✅ **자동 DB 입력**: 추출된 데이터를 MedDRA-DB에 원클릭으로 입력
- ✅ **계층 구조 표시**: MedDRA 5단계 계층 구조 (LLT → PT → HLT → HLGT → SOC)

---

## 접속 방법

### 웹사이트 주소
```
https://cjlee-cmd.github.io/MedDRA-Auto-withoutServer/
```

### 권장 브라우저
- Google Chrome (권장)
- Microsoft Edge
- Firefox
- Safari

> **참고**: 최신 버전의 브라우저를 사용하세요.

---

## 로그인

### 1. 로그인 페이지
웹사이트에 접속하면 로그인 화면이 나타납니다.

### 2. 로그인 정보 입력
```
사용자 이름: acuzen
비밀번호: acuzen
```

### 3. 자동 로그인
"자동 로그인" 체크박스를 선택하면 7일간 로그인 상태가 유지됩니다.

### 4. 로그인 버튼 클릭
"로그인" 버튼을 클릭하면 메인 화면으로 이동합니다.

---

## 주요 기능

### 화면 구성

메인 화면은 크게 3개 영역으로 구성됩니다:

#### 왼쪽 사이드바
1. **검색 문서**
   - PDF 파일 업로드 영역
   - 업로드된 문서 정보 표시

2. **증상 및 용어 검색**
   - 수동 검색 입력란
   - 검색 결과 개수 설정
   - 비활성 용어 포함 옵션

3. **DB 자동 입력**
   - MedDRA-DB 자동 입력 버튼

#### 오른쪽 메인 영역
- 검색 결과 표시
- MedDRA 계층 구조 표시
- 자동 검색 결과 그룹화

---

## CIOMS 보고서 처리

### 1. PDF 파일 업로드

**방법 1: 파일 선택 버튼**
1. 왼쪽 사이드바 "검색 문서" 섹션에서 "📄 파일 선택" 버튼 클릭
2. CIOMS-I 보고서 PDF 파일 선택
3. 자동으로 파일 분석 시작

**방법 2: 드래그 앤 드롭**
1. PDF 파일을 "파일 선택" 영역으로 드래그
2. 마우스를 놓으면 자동으로 업로드

### 2. 자동 분석 진행

PDF 업로드 후 시스템이 자동으로:
1. ✅ PDF 텍스트 추출
2. ✅ 환자 정보 추출 (이니셜, 국가, 나이, 성별)
3. ✅ 부작용 정보 추출 (영어/한글)
4. ✅ 의약품 정보 추출
5. ✅ CIOMS 데이터 구조화

### 3. 팝업 확인

분석 완료 후 팝업 창이 나타나며 다음 정보를 표시합니다:

**📋 기본 정보**
- 제조업체 관리번호
- 접수일

**👤 환자 정보**
- 환자 이니셜
- 국가
- 나이
- 성별

**⚠️ 부작용 정보**
- 부작용 목록 (영어/한글)

**💊 의약품 정보**
- 의심 약물
- 적응증

### 4. 자동 검색 실행

팝업에서 "🔍 자동 검색 시작" 버튼을 클릭하면:

1. ✅ 추출된 모든 부작용 증상을 자동으로 검색
2. ✅ 각 증상별 MedDRA 코드 매칭
3. ✅ 검색 진행률 표시
4. ✅ 결과를 증상별로 그룹화하여 표시

### 5. 검색 결과 확인

각 증상별로:
- **LLT (최하위 용어)**: 검색된 용어명, 코드, 활성 상태, 관련도 점수
- **PT (선호 용어)**: 상위 개념의 선호 용어
- **계층 구조**: HLT → HLGT → SOC 전체 경로
- **주 SOC 표시**: 기본 시스템 기관 분류 강조

#### 결과 카드 확장/축소
- 각 결과 카드를 클릭하면 상세 계층 구조 표시
- 다시 클릭하면 축소

---

## 자동 DB 입력

### 1. 자동 입력 준비

CIOMS 보고서를 분석하고 자동 검색을 완료한 후:

1. 왼쪽 사이드바의 "DB 자동 입력" 섹션으로 이동
2. "🚀 MedDRA-DB에 자동 입력" 버튼 클릭

### 2. 자동 입력 프로세스

버튼을 클릭하면:

1. ✅ **새 탭 열기**: MedDRA-DB 사이트가 새 탭에서 열림
2. ✅ **데이터베이스 로딩**: IndexedDB 데이터 로드 대기
3. ✅ **자동 로그인**: 로그인 페이지인 경우 자동 로그인 시도
4. ✅ **폼 페이지 이동**: form-edit.html로 자동 이동
5. ✅ **데이터 자동 입력**:
   - 제조업체 관리번호
   - 접수일
   - 환자 정보 (이니셜, 국가, 나이, 성별)
   - 부작용 정보 (영어/한글) - 모든 부작용 자동 추가
   - 의약품 정보 (약물명, 적응증, 구분)

### 3. 입력 확인

자동 입력 후:
- 브라우저 콘솔에 입력 진행 상황 표시
- 각 필드별 입력 완료 메시지 확인
- 수동으로 추가 정보 입력 가능

### 4. 저장

1. 모든 정보 확인 후 **"저장"** 버튼 클릭
2. 성공 메시지: "폼이 생성되었습니다"
3. 자동으로 폼 목록 페이지로 이동

### ⚠️ 주의사항

**중복 관리번호 오류**
- 같은 관리번호가 이미 존재하면 오류 발생
- 오류 메시지: "폼이 이미 존재합니다: 관리번호 \"40054\" (ID: 1)"
- 해결 방법:
  1. 기존 폼을 먼저 삭제하거나
  2. 관리번호를 수정한 후 다시 저장

---

## 수동 검색

자동 검색 외에도 수동으로 증상을 검색할 수 있습니다.

### 1. 검색어 입력

왼쪽 사이드바 "증상 및 용어 검색" 섹션:
1. "증상 또는 용어" 입력란에 검색어 입력
2. 결과 수 설정 (기본값: 10개)
3. 필요시 "비활성 용어 포함" 체크

### 2. 검색 실행

- **🔍 검색**: 일반 검색 실행
- **✨ AI 검색**: AI 기반 스마트 검색 (서버 모드에서만 사용 가능)

### 3. 검색 결과 확인

결과는 메인 영역에 카드 형식으로 표시됩니다.

---

## 다크 모드

### 다크 모드 전환
- 오른쪽 상단 "다크모드" 버튼 클릭
- 설정이 자동 저장되어 다음 방문 시에도 유지

---

## 로그아웃

### 로그아웃 방법
1. 오른쪽 상단의 사용자 배지 옆 "로그아웃" 버튼 클릭
2. 로그인 페이지로 자동 이동
3. 모든 세션 정보 삭제

---

## 문제 해결

### PDF 분석이 안 됩니다
**증상**: PDF를 업로드했지만 아무 반응이 없습니다.

**해결 방법**:
1. PDF 파일이 텍스트를 포함하는지 확인 (스캔 이미지 PDF는 지원 안 함)
2. 파일 크기 확인 (너무 큰 파일은 시간이 걸릴 수 있음)
3. 브라우저 콘솔(F12)에서 오류 메시지 확인
4. 페이지 새로고침 후 다시 시도

### 자동 검색 결과가 없습니다
**증상**: 자동 검색을 실행했지만 결과가 표시되지 않습니다.

**해결 방법**:
1. PDF에서 추출된 부작용 정보 확인
2. 증상명이 영어 또는 한글로 올바르게 추출되었는지 확인
3. 수동 검색으로 증상명 직접 검색해보기

### DB 자동 입력이 안 됩니다
**증상**: "MedDRA-DB에 자동 입력" 버튼을 눌렀지만 새 탭이 열리지 않습니다.

**해결 방법**:
1. 브라우저의 팝업 차단 설정 확인
2. 팝업 허용 후 다시 시도
3. CIOMS 데이터가 올바르게 추출되었는지 확인

### 파일 선택 버튼이 작동하지 않습니다
**증상**: "파일 선택" 버튼을 클릭해도 파일 선택 창이 열리지 않습니다.

**해결 방법**:
1. 브라우저 캐시 강력 새로고침
   - Windows: `Ctrl + Shift + R`
   - Mac: `Cmd + Shift + R`
2. 다른 브라우저에서 시도
3. 드래그 앤 드롭 방식으로 파일 업로드

### 저장 시 오류가 발생합니다
**증상**: "폼이 이미 존재합니다" 오류 메시지가 표시됩니다.

**해결 방법**:
1. MedDRA-DB의 "폼 목록" 페이지에서 기존 폼 확인
2. 중복된 관리번호를 가진 폼 삭제
3. 또는 관리번호를 수정 후 다시 저장

---

## 시스템 요구사항

### 브라우저
- Chrome 90 이상 (권장)
- Edge 90 이상
- Firefox 88 이상
- Safari 14 이상

### 인터넷 연결
- 안정적인 인터넷 연결 필요
- MedDRA 데이터 로드 시 초기에 시간이 걸릴 수 있음

### 파일 형식
- PDF 형식의 CIOMS-I 보고서
- 텍스트 추출 가능한 PDF (스캔 이미지는 지원 안 함)

---

## 지원 및 문의

### 기술 지원
문제 발생 시 다음 정보를 포함하여 문의하세요:
1. 사용 중인 브라우저 및 버전
2. 발생한 오류 메시지 (스크린샷 포함)
3. 브라우저 콘솔 로그 (F12 → Console 탭)

### 개발자 정보
- GitHub: https://github.com/cjLee-cmd
- Repository: https://github.com/cjLee-cmd/MedDRA-Auto-withoutServer

---

## 버전 정보

- **시스템 버전**: 2.0
- **MedDRA 버전**: 28.1 Korean
- **최종 업데이트**: 2025-10-17

---

## 라이선스

이 시스템은 ACUZEN 내부용으로 개발되었습니다.

---

**© 2025 ACUZEN | MedDRA 28.1 Korean Auto-Coding System**
