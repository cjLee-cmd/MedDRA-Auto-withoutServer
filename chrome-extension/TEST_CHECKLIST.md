# Chrome 확장 프로그램 테스트 체크리스트

---

## 🔧 Phase 1: 설치 테스트

### ✅ 확장 로드
- [ ] Chrome 확장 페이지 (`chrome://extensions/`) 접속 가능
- [ ] 개발자 모드 활성화됨
- [ ] "압축해제된 확장 로드" 버튼 클릭 후 `chrome-extension` 폴더 선택
- [ ] 확장이 정상적으로 로드됨
- [ ] 확장 ID가 표시됨 (예: `abcd1234...`)
- [ ] 에러 메시지가 없음

### ✅ 확장 ID 설정
- [ ] 확장 ID 복사
- [ ] `script.js` 파일 열기
- [ ] 1485번 줄의 `YOUR_EXTENSION_ID_HERE`를 실제 ID로 교체
- [ ] 파일 저장

### ✅ manifest.json 검증
- [ ] `manifest_version: 3` 설정됨
- [ ] `permissions` 배열에 필요한 권한 포함
- [ ] `host_permissions`에 GitHub Pages URL 포함
- [ ] `background.service_worker` 경로 올바름
- [ ] `content_scripts` 설정 올바름

---

## 🌐 Phase 2: GitHub Pages 통신 테스트

### ✅ 페이지 로드
- [ ] `https://cjlee-cmd.github.io/MedDRA/main.html` 접속
- [ ] 페이지가 정상적으로 로드됨
- [ ] 콘솔에 에러 없음

### ✅ 확장 감지
- [ ] Chrome 개발자 도구 열기 (F12)
- [ ] 콘솔에서 `typeof chrome.runtime` 실행
- [ ] 결과: `"object"` (undefined가 아님)

### ✅ PDF 업로드
- [ ] PDF 파일 드래그 앤 드롭
- [ ] 또는 파일 선택 버튼 클릭
- [ ] CIOMS 데이터 추출 성공
- [ ] JSON 파일 다운로드됨
- [ ] 자동 검색 시작됨

---

## 🔘 Phase 3: 버튼 동작 테스트

### ✅ "MedDRA-DB에 자동입력" 버튼
- [ ] 버튼이 표시됨
- [ ] 버튼 클릭 시 확인 대화상자 표시
- [ ] "확인" 클릭 시 로딩 오버레이 표시
- [ ] Chrome 확장에 메시지 전송됨 (콘솔 확인)

### ✅ 에러 처리
- [ ] 확장 미설치 시: "Chrome 확장이 설치되지 않았습니다" 경고
- [ ] 확장 ID 불일치 시: "Chrome 확장과 통신할 수 없습니다" 경고
- [ ] CIOMS 데이터 없을 시: "먼저 PDF 파일을 업로드하세요" 경고

---

## 📡 Phase 4: Background Script 테스트

### ✅ 메시지 수신
- [ ] `chrome://extensions/` → 확장 → "서비스 워커" 클릭
- [ ] 개발자 도구 (백그라운드) 열림
- [ ] 콘솔에 `[MedDRA AutoFill] Background service worker started` 표시
- [ ] GitHub Pages에서 버튼 클릭
- [ ] 콘솔에 `[Background] Received external message` 표시
- [ ] CIOMS 데이터가 로그에 출력됨

### ✅ 탭 생성
- [ ] 새 탭이 자동으로 열림
- [ ] URL이 `https://cjlee-cmd.github.io/MedDRA-DB/`
- [ ] 탭이 활성화됨 (포커스)

### ✅ Storage 저장
- [ ] 콘솔에 `[Background] CIOMS data saved to storage` 표시
- [ ] Chrome DevTools → Application → Storage → Local Storage 확인
- [ ] `pendingCiomsData`와 `timestamp` 키가 존재

---

## 📝 Phase 5: Content Script 테스트

### ✅ 스크립트 로드
- [ ] MedDRA-DB 탭 열림
- [ ] F12로 개발자 도구 열기
- [ ] 콘솔에 `[MedDRA AutoFill] Content script loaded` 표시
- [ ] 콘솔에 `[Content] Initializing...` 표시
- [ ] 콘솔에 `[Content] Found CIOMS data, starting autofill` 표시

### ✅ 데이터베이스 로딩 대기
- [ ] 콘솔에 `📄 MedDRA-DB 사이트 로딩 중...` 표시
- [ ] 로딩 오버레이가 사라질 때까지 대기
- [ ] 콘솔에 `✓ 데이터베이스 로딩 완료` 표시

### ✅ 로그인
- [ ] 콘솔에 `🔐 로그인 중...` 표시
- [ ] 아이디 필드에 "acuzen" 입력됨
- [ ] 비밀번호 필드에 "acuzen" 입력됨
- [ ] 로그인 버튼 클릭됨
- [ ] 콘솔에 `✓ 아이디 입력`, `✓ 비밀번호 입력`, `✓ 로그인 버튼 클릭` 표시

### ✅ 새 폼 페이지 이동
- [ ] 콘솔에 `📝 새 폼 작성 페이지로 이동...` 표시
- [ ] `form-edit.html`로 이동됨
- [ ] 또는 "새 폼 추가" 링크 클릭됨

### ✅ 폼 필드 입력
- [ ] 콘솔에 `📋 폼 필드 입력 중...` 표시
- [ ] 각 필드에 대해 `✓ 필드명: 값` 로그 출력
- [ ] 기본 정보 필드 입력됨
  - [ ] 제조업체 관리번호
  - [ ] 접수일
  - [ ] 환자 이니셜
  - [ ] 국가
  - [ ] 나이
  - [ ] 성별

### ✅ 반응 정보 입력
- [ ] 콘솔에 `📋 반응 정보 입력 중...` 표시
- [ ] 각 반응에 대해:
  - [ ] `반응 N:` 로그 출력
  - [ ] 영어 반응명 입력됨
  - [ ] 한글 반응명 입력됨
  - [ ] N > 1인 경우 "부작용 추가" 버튼 클릭됨
- [ ] 콘솔에 `✅ 총 N개 반응 입력 완료` 표시

### ✅ 의약품 정보 입력
- [ ] 약물명 (영어) 입력됨
- [ ] 약물명 (한글) 입력됨
- [ ] 적응증 (영어) 입력됨
- [ ] 적응증 (한글) 입력됨
- [ ] 의심 약물 여부 (S/C) 입력됨

### ✅ 인과성 평가 입력
- [ ] 평가 방법 입력됨
- [ ] 평가 결과 입력됨
- [ ] 평가 근거 입력됨
- [ ] 평가자 입력됨
- [ ] 평가일 입력됨

### ✅ 저장
- [ ] 콘솔에 `💾 저장 중...` 표시
- [ ] 저장 버튼 클릭됨
- [ ] 콘솔에 `✓ 저장 버튼 클릭` 표시
- [ ] 콘솔에 `✅ DB 자동 입력 완료!` 표시

---

## 🔍 Phase 6: 엣지 케이스 테스트

### ✅ 반응 개수 변화
- [ ] 반응 1개: 정상 입력
- [ ] 반응 3개: 정상 입력
- [ ] 반응 5개 이상: 정상 입력

### ✅ 불완전한 데이터
- [ ] 환자 이니셜 없음: 빈 값으로 입력
- [ ] 반응 한글명만 있음: 영문에 빈 값
- [ ] 약물 정보 없음: 해당 필드 스킵

### ✅ 타이밍 이슈
- [ ] 로딩 오버레이가 느리게 사라짐: 정상 대기
- [ ] 페이지 로드가 느림: 정상 대기
- [ ] 입력 필드가 동적으로 생성됨: MutationObserver가 감지

### ✅ 에러 시나리오
- [ ] MedDRA-DB 사이트 접속 불가: 에러 메시지 표시
- [ ] 로그인 실패: 콘솔에 경고 로그
- [ ] 필드를 찾을 수 없음: `⚠️ 필드를 찾을 수 없습니다` 로그
- [ ] Storage 데이터 만료 (5분 이상): 자동 무시

---

## 🧪 Phase 7: 성능 테스트

### ✅ 속도
- [ ] 확장 로드 시간: < 1초
- [ ] 메시지 전달 시간: < 100ms
- [ ] 전체 자동 입력 시간: < 30초

### ✅ 메모리
- [ ] 확장 메모리 사용량: < 50MB
- [ ] Storage 사용량: < 1MB
- [ ] 메모리 누수 없음 (여러 번 실행 후)

### ✅ 안정성
- [ ] 5회 연속 실행 성공
- [ ] 다른 탭이 열려 있어도 정상 작동
- [ ] 페이지 새로고침 후에도 정상 작동

---

## 🔒 Phase 8: 보안 테스트

### ✅ 권한 최소화
- [ ] `manifest.json`에서 불필요한 권한 없음
- [ ] `host_permissions`가 특정 도메인으로 제한됨
- [ ] 외부 서버로 데이터 전송 없음

### ✅ 데이터 보호
- [ ] CIOMS 데이터가 Storage에 5분 후 자동 삭제됨
- [ ] 확장 제거 시 모든 데이터 삭제됨
- [ ] 콘솔에 민감한 정보 출력 안 됨

---

## 📱 Phase 9: 크로스 브라우저 테스트

### ✅ Chrome
- [ ] 버전: 최신 안정화 버전
- [ ] 모든 기능 정상 작동

### ✅ Edge (Chromium 기반)
- [ ] 확장 로드 가능
- [ ] 모든 기능 정상 작동

### ✅ Brave
- [ ] 확장 로드 가능
- [ ] 모든 기능 정상 작동

### ❌ Firefox (호환 불가)
- [ ] Manifest V3 형식이 다름
- [ ] WebExtensions API로 별도 개발 필요

### ❌ Safari (호환 불가)
- [ ] 완전히 다른 확장 시스템
- [ ] Xcode로 별도 개발 필요

---

## 📋 Phase 10: 사용자 시나리오 테스트

### ✅ 시나리오 1: 첫 사용자
1. [ ] Chrome 확장 설치
2. [ ] GitHub Pages 접속
3. [ ] PDF 업로드
4. [ ] 자동 입력 버튼 클릭
5. [ ] 결과 확인

### ✅ 시나리오 2: 반복 사용자
1. [ ] 이미 확장 설치됨
2. [ ] 다른 PDF 업로드
3. [ ] 자동 입력 버튼 클릭
4. [ ] 결과 확인

### ✅ 시나리오 3: 에러 복구
1. [ ] 확장 비활성화 상태에서 버튼 클릭
2. [ ] 에러 메시지 확인
3. [ ] 확장 활성화
4. [ ] 페이지 새로고침
5. [ ] 재시도 성공

---

## ✅ 최종 체크리스트

### 필수 항목
- [ ] 모든 Phase 1-5 테스트 통과
- [ ] Phase 6 주요 엣지 케이스 테스트 통과
- [ ] Phase 7 성능 기준 충족
- [ ] Phase 8 보안 검증 완료

### 권장 항목
- [ ] README.md 문서 최신화
- [ ] 스크린샷 추가 (설치 가이드용)
- [ ] 버그 리포트 템플릿 작성
- [ ] 버전 번호 업데이트

### 배포 준비
- [ ] `manifest.json`의 `version` 확인
- [ ] `script.js`의 `EXTENSION_ID` 업데이트
- [ ] GitHub Pages 재배포
- [ ] 사용자 가이드 작성 완료

---

## 🐛 버그 발견 시

### 기록할 정보
1. Chrome 버전: `chrome://version/`
2. 확장 버전: `manifest.json`의 `version`
3. 재현 단계: 상세히 기록
4. 콘솔 로그: 전체 복사
5. 스크린샷: 에러 화면 캡처

### 보고 위치
- GitHub Issues
- 개발자 이메일
- 또는 CLAUDE.md에 명시된 연락처

---

**테스트 수행일**: ___________________
**테스트 담당자**: ___________________
**전체 통과 여부**: [ ] 통과 / [ ] 실패
**비고**: _________________________
